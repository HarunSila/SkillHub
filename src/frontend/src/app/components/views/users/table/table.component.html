<mat-form-field class="filter-field">
  <mat-label>Filter</mat-label>
  <input matInput (keyup)="applyFilter($event)" #input>
</mat-form-field>

<div class="table-container">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">

        <ng-container matColumnDef="Keycloak Id">
            <th mat-header-cell *matHeaderCellDef> Keycloak Id </th>
            <td mat-cell *matCellDef="let user"> {{user.keycloakId}} </td>
        </ng-container>

        <ng-container matColumnDef="Username">
            <th mat-header-cell *matHeaderCellDef> Username </th>
            <td mat-cell *matCellDef="let user"> {{user.username}} </td>
        </ng-container>

        <ng-container matColumnDef="Name">
            <th mat-header-cell *matHeaderCellDef> Name </th>
            <td mat-cell *matCellDef="let user"> {{user.name}} {{user.surname}} </td>
        </ng-container>

        <ng-container matColumnDef="Email">
            <th mat-header-cell *matHeaderCellDef> Email </th>
            <td mat-cell *matCellDef="let user"> {{user.email}} </td>
        </ng-container>

        <ng-container matColumnDef="Status" *ngIf="role === 'trainer'">
            <th mat-header-cell *matHeaderCellDef> Status </th>
            <td mat-cell *matCellDef="let user">
                <mat-select [ngModel]="getStatus(user)" placeholder="Select Status" (selectionChange)="assignStatus(user, $event.value)">
                    <mat-option *ngFor="let status of trainerStatuses" [value]="status">
                        {{ trainerStatusLabels[status] }}
                    </mat-option>
                </mat-select>
            </td>
        </ng-container>

        <ng-container matColumnDef="Details" *ngIf="role === 'trainer' || role === 'participant'">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let user"> 
                <button mat-button (click)="onDelete(user)" color="warn">Delete</button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="columns"></tr>
        <tr mat-row *matRowDef="let row; columns: columns;"></tr>

        <!-- Row shown when there is no matching data. -->
        <ng-container *ngIf="input.value.length !== 0">
            <tr class="mat-row" *matNoDataRow>
                <td class="mat-cell" colspan="4" style="color: white;">No data matching the filter "{{input.value}}"</td>
            </tr>
        </ng-container>
    </table>
</div>