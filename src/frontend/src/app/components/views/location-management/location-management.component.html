<mat-card class="form-card">
    <mat-card-title>Location Registration</mat-card-title>
    <app-add-location [locations]="locations" [locationToEdit]="locationToEdit" (locationAdded)="onLocationAdded($event)"/>
</mat-card>

<mat-card class="form-card table">
    <mat-card-title>Location List</mat-card-title>
    <div class="table-container">
        <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
            <ng-container matColumnDef="name">
                <th mat-header-cell *matHeaderCellDef> Name </th>
                <td mat-cell *matCellDef="let location"> {{location.name}} </td>
            </ng-container>

            <ng-container matColumnDef="capacity">
                <th mat-header-cell *matHeaderCellDef> Capacity </th>
                <td mat-cell *matCellDef="let location"> {{location.capacity}} </td>
            </ng-container>

            <ng-container matColumnDef="equipmentList">
                <th mat-header-cell *matHeaderCellDef> Equipment </th>
                <td mat-cell *matCellDef="let location">
                    <ng-container *ngFor="let equipment of location.equipmentList; let last = last">
                        {{ equipment.name }} ({{ equipment.amount }})<span *ngIf="!last">, </span>
                    </ng-container>
                </td>
            </ng-container>

            <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef> Status </th>
                <td mat-cell *matCellDef="let location">{{getLocationStatus(location)}}</td>
            </ng-container>

            <ng-container matColumnDef="actions">
                <th mat-header-cell *matHeaderCellDef> Actions </th>
                <td mat-cell *matCellDef="let location">
                    <button mat-icon-button (click)="editLocation(location)"><mat-icon fontIcon="edit"></mat-icon></button>
                    <button mat-icon-button (click)="deleteLocation(location)"><mat-icon fontIcon="delete"></mat-icon></button>
                </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
    </div>
</mat-card>